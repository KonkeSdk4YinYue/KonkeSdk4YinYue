import{_,c as h,b as n,w as v,h as u,v as f,a as r,o as w,p as I,g as C,i as g,d as N}from"./_plugin-vue_export-helper-051f66a3.js";import"./index-9d551784.js";/* empty css              *//* empty css              */import"./index-0f3161d3.js";import{F as L}from"./index-c3a7f1d1.js";import{_ as b}from"./nav-bar-a1dce73c.js";import{R as k}from"./room-component-ebb7a639.js";import{S as R}from"./scene-action-light-component-f627c98b.js";import{d as S,e as D,f as V,r as y}from"./api-c3130a22.js";import{g as P}from"./urlparse-f25d0f77.js";import{a as l}from"./function-call-753dd7bf.js";import{P as j}from"./index-1c58f097.js";import"./use-route-666d481f.js";import"./use-id-ae36fcd7.js";import"./use-expose-1ff20361.js";import"./index-38a4c887.js";import"./index-bf853e3e.js";import"./index-d8032618.js";/* empty css              */import"./index-2954d1b3.js";import"./use-touch-8855ff1b.js";import"./index-6ceb7711.js";import"./index-1c77c952.js";const U={components:{SceneActionLight:R,RoomListPop:k},data(){return{devName:"",room_sel_show:!1,roomList:[],roomName:"",roomId:-1,devId:-1,typeName:"电视"}},mounted(){this.getUrlParams()},methods:{getUrlParams(){let o=window.location.search;const e=P(o);console.log(e),e!=null&&"devId"in e&&(this.devId=e.devId,console.log(this.devId),this.devId!=null&&this.devId!=-1&&this.getDevInfo())},getDevInfo(){S({userDeviceId:this.devId}).then(o=>{var e;console.log(o),this.roomName=(e=o.data.userDeviceList[0])==null?void 0:e.roomName,this.roomId=o.data.userDeviceList[0].roomId,this.devName=o.data.userDeviceList[0].deviceName}).catch(o=>l(o))},onClickLeft(){window.__jsb.pop()},onClickRight(){if(this.devName==""){l("请输入设备名称");return}if(this.roomId==-1){l("请选择房间");return}D(this.devId,this.devName,this.roomId).then(o=>{window.__jsb.forwardEvent("reload","","devedit",""),window.__jsb.pop()})},toSelType(){window.__jsb.push({route:"dev-infrared-type",params:{devId:this.devId}})},delDev(){V(this.devId).then(o=>{window.__jsb.forwardEvent("reload","","devedit",""),window.__jsb.pop()}).catch(o=>{l(o)})},selRoom(){this.room_sel_show=!0,y().then(o=>{o.code==200?this.roomList=o.data.roomList:l(o.info)})},onRoomSelCancel(){this.room_sel_show=!1},onRoomSelConfirm(o){console.log("onRoomSelConfirm",o),this.roomName=o.roomName,this.roomId=o.roomId,this.room_sel_show=!1}}},d=o=>(I("data-v-770f7ba2"),o=o(),C(),o),x={class:"home"},A=d(()=>r("div",{class:"name_hint"}," 设备名称 ",-1)),O=d(()=>r("div",{class:"name_hint"}," 房间 ",-1)),B=d(()=>r("div",{class:"name_hint"}," 红外配置 ",-1));function E(o,e,F,q,t,i){const a=b,m=L,p=g("RoomListPop"),c=j;return w(),h("div",x,[n(a,{class:"nav_bar",title:"编辑设备","right-text":"保存",onClickRight:i.onClickRight,onClickLeft:i.onClickLeft},null,8,["onClickRight","onClickLeft"]),A,n(m,{class:"input",modelValue:t.devName,"onUpdate:modelValue":e[0]||(e[0]=s=>t.devName=s),clearable:"",placeholder:"请输入设备名称"},null,8,["modelValue"]),O,n(m,{class:"input",modelValue:t.roomName,"onUpdate:modelValue":e[1]||(e[1]=s=>t.roomName=s),onClick:i.selRoom,"right-icon":"arrow ",readonly:"",placeholder:"请选择房间"},null,8,["modelValue","onClick"]),B,n(m,{class:"input",modelValue:t.typeName,"onUpdate:modelValue":e[2]||(e[2]=s=>t.typeName=s),onClick:i.toSelType,"right-icon":"arrow ",readonly:"",placeholder:"请选择红外类型"},null,8,["modelValue","onClick"]),n(c,{show:t.room_sel_show,"onUpdate:show":e[3]||(e[3]=s=>t.room_sel_show=s),position:"bottom"},{default:v(()=>[n(p,{list:t.roomList,onOnCancal:i.onRoomSelCancel,onOnConfirm:i.onRoomSelConfirm},null,8,["list","onOnCancal","onOnConfirm"])]),_:1},8,["show"]),u(r("div",{class:"del_text",onClick:e[4]||(e[4]=(...s)=>i.delDev&&i.delDev(...s))},"删除设备",512),[[f,t.devId!=null&&t.devId!=-1]])])}const T=_(U,[["render",E],["__scopeId","data-v-770f7ba2"]]);N(T).mount("#root");

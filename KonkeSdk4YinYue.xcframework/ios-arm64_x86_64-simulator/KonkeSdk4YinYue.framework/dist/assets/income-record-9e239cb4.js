import{_ as C,c as a,a as h,b as n,d as f,o,F as g,r as u,j as D,t as r,i as S}from"./_plugin-vue_export-helper-ae94e834.js";import{T as w,a as k}from"./index-229bfbdd.js";import"./index-015663ed.js";import"./index-5198b2b7.js";import{P as T}from"./index-ca2a2be7.js";import{_ as Y}from"./navbar-dd7c7647.js";import{_ as F}from"./safe-area-top-6391331c.js";import{C as j}from"./charge_coin_icon-3dd00476.js";import{A as v}from"./api-3777ac7b.js";import{d as R}from"./dayjs.min-40a0aa38.js";import"./use-id-b8b960f0.js";import"./use-expose-833097fe.js";import"./use-route-fa444ad9.js";import"./use-tab-status-ea9b54fd.js";import"./on-popup-reopen-34d1e964.js";import"./constant-eb256a74.js";import"./interceptor-c174082f.js";import"./use-touch-b8f7fc8d.js";const V={name:"AssignmentList",data(){return{ChargeCoin:j,gold:0,score:0,loading:!1,finished:!1,active:"income",refreshing:!1,minId:void 0,exListMinId:void 0,gender:0,tabs:[{title:"收益记录",name:"income"},{title:"提现记录",name:"expenditure"}],inList:[],exList:[]}},created(){this.getMyInfo()},methods:{dayjs:R,onRefresh(){this.refreshing=!0,this.minId=void 0,this.getScoreList()},handleChangeTab(i){this.minId=void 0,this.exListMinId=void 0,i===0?this.getScoreList():this.getMyScoreConsumerFlows()},async getMyInfo(){const{data:i}=await v.getMyInfo();this.gender=i.gender,this.getScoreList()},async getMyScoreConsumerFlows(){var c;const i={};this.minId&&(i.minId=this.minId);const{data:s}=await v.getMyScoreConsumerFlows(i);this.exList&&this.exList.length>0&&!this.refreshing?this.exList=this.exList.concat(s):this.exList=s,this.refreshing=!1,this.minId=(c=s[s.length-1])==null?void 0:c.id},async getScoreList(){var _;const i={};this.exListMinId&&(i.minId=this.exListMinId);const{data:s}=await v.getScoreList(i),c=Array.isArray(s)?s==null?void 0:s.map(t=>{const{score:d}=t;return{...t,gold:d}}):[];this.inList&&this.inList.length>0&&!this.refreshing?this.inList=this.inList.concat(c):this.inList=c,this.refreshing=!1,this.exListMinId=(_=c[c.length-1])==null?void 0:_.id},pop(){__jsb.pop()}}},B={class:"charge-container"},H={class:"charge-record-container"},N={key:0,class:"record-content"},P={class:"left"},q={class:"desc"},U={class:"time"},E={class:"right"},z={key:1,class:"record-content"},G={class:"left"},J={class:"desc"},K={class:"time"},O={class:"right ex"},Q={class:"way"};function W(i,s,c,_,t,d){const x=F,I=Y,M=T,b=k,A=w;return o(),a("div",B,[h(x),h(I,{title:"收益明细"}),n("div",H,[h(A,{active:t.active,"onUpdate:active":s[1]||(s[1]=m=>t.active=m),animated:"","line-height":"4px","line-width":"20px","title-active-color":"#1F263D",onChange:d.handleChangeTab},{default:f(()=>[(o(!0),a(g,null,u(t.tabs,(m,L)=>(o(),D(b,{key:L,title:m.title},{default:f(()=>[h(M,{modelValue:t.refreshing,"onUpdate:modelValue":s[0]||(s[0]=e=>t.refreshing=e),onRefresh:d.onRefresh},{default:f(()=>[L===0?(o(),a("div",N,[(o(!0),a(g,null,u(t.inList,(e,p)=>{var l;return o(),a("div",{class:"record-item",key:p},[n("div",P,[n("div",q,r((l=e==null?void 0:e.scoreAccountTransactionDesc)==null?void 0:l.actionDesc),1),n("div",U,r(d.dayjs(e.timeStamp).format("YYYY-MM-DD HH:mm:ss")),1)]),n("div",E,"+"+r(e.gold)+r(t.gender===2?"积分":"金币"),1)])}),128))])):(o(),a("div",z,[(o(!0),a(g,null,u(t.exList,(e,p)=>{var l,y;return o(),a("div",{class:"record-item",key:p},[n("div",G,[n("div",J,r((l=e==null?void 0:e.scoreAccountTransactionDesc)==null?void 0:l.userName),1),n("div",K,r(d.dayjs(e.timeStamp).format("YYYY-MM-DD HH:mm:ss")),1)]),n("div",O,[n("span",null,"-"+r(e.gold)+r(t.gender===2?"积分":"金币"),1),n("span",Q,r((y=e==null?void 0:e.scoreAccountTransactionDesc)==null?void 0:y.actionDesc),1)])])}),128))]))]),_:2},1032,["modelValue","onRefresh"])]),_:2},1032,["title"]))),128))]),_:1},8,["active","onChange"])])])}const X=C(V,[["render",W],["__scopeId","data-v-2dce073c"]]);S(X).mount("#root");

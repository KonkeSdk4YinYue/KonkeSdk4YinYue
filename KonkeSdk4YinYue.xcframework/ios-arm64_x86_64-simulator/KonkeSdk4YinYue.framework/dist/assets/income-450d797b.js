import{W as A,V as P,a as n,G as j,_ as N,c as a,b as o,f,t as l,d as m,o as i,F as C,r as k,j as G,e as S,g as R,p as U,h as V,I as W,i as F}from"./_plugin-vue_export-helper-ae94e834.js";/* empty css              */import"./index-5198b2b7.js";import{B as H}from"./index-46966e79.js";import{T as q,a as z}from"./index-229bfbdd.js";import"./index-015663ed.js";import{I as J}from"./index-9cad779b.js";import{_ as K}from"./navbar-dd7c7647.js";import{_ as Q}from"./safe-area-top-6391331c.js";import{A as g}from"./api-3777ac7b.js";import{d as X}from"./dayjs.min-40a0aa38.js";import{m as Y,u as Z,a as I}from"./function-call-d8608672.js";import{s as $}from"./index-91e6daf5.js";import{O as ee}from"./index-6f826b23.js";import"./use-route-fa444ad9.js";import"./constant-eb256a74.js";import"./use-id-b8b960f0.js";import"./use-expose-833097fe.js";import"./use-tab-status-ea9b54fd.js";import"./on-popup-reopen-34d1e964.js";import"./interceptor-c174082f.js";import"./use-touch-b8f7fc8d.js";import"./index-c49f2c8f.js";let x;const te={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let oe=A({},te);function se(){({instance:x}=Y({setup(){const{state:e,toggle:_}=Z();return()=>n($,j(e,{"onUpdate:show":_}),null)}}))}function ne(s){return P?new Promise((e,_)=>{x||se(),x.open(A({},oe,s,{callback:w=>{(w==="confirm"?e:_)(w)}}))}):Promise.resolve()}const ie=""+new URL("income_gold-1449daa0.svg",import.meta.url).href,re=""+new URL("withdraw_icon-ea40f6c5.svg",import.meta.url).href;const ae={name:"AssignmentList",data(){return{ChargeCoin:ie,WithdrawIcon:re,score:0,loading:!1,finished:!1,active:"income",refreshing:!1,minId:void 0,exListMinId:void 0,show:!1,gender:0,editItem:{},tabs:[{title:"积分提现",name:"income"},{title:"兑换金币",name:"expenditure"}],inList:[],exList:[]}},created(){this.getMyInfo(),this.getScoreExchangeGold(),this.scoreExchangeMoneyConfig()},methods:{dayjs:X,handleDialog(){ne({message:"提现手续费为6%"}).then(()=>{})},async handleConfirm(s){if(this.show=!1,s===2)try{const{success:e,message:_}=await g.scoreExchangeGold({configId:this.editItem.objectId,score:this.editItem.score});e?I("兑换成功"):I(_||"兑换失败")}catch{I("兑换失败")}finally{}else __jsb.push({route:"exchange",item:this.editItem})},handleClick(s,e){this.editItem={...s,type:e},this.show=!0},getRecord(){__jsb.push({route:"income-record"})},async getMyInfo(){const{data:s}=await g.getMyInfo();this.gender=s.gender;const{data:{score:e}={}}=await g.getMyScore();this.score=e},async getScoreExchangeGold(){const{data:s}=await g.getScoreExchangeGold();this.exList=s},async scoreExchangeMoneyConfig(){const{data:s}=await g.scoreExchangeMoneyConfig();this.inList=s},pop(){__jsb.pop()}}},ce=s=>(U("data-v-74592ac4"),s=s(),V(),s),le={class:"charge-container"},de={class:"container"},me={class:"balance"},_e={class:"tips"},pe=ce(()=>o("span",{class:"text"},"积分余额",-1)),ue={class:"count"},he={key:0,class:"record-content"},fe=["onClick"],ge={class:"left"},ve={class:"right"},ye={key:1,class:"record-content"},we=["onClick"],Ce={class:"left"},ke={class:"right"},Ie={key:0},xe={class:"title"},be={class:"cost"},Be={key:1},Le={class:"title"},Se={class:"cost"};function Ae(s,e,_,w,t,d){const D=Q,E=K,b=W,B=J,M=z,T=q,v=H,O=ee;return i(),a("div",le,[n(D),n(E,{title:"收益"}),o("div",de,[o("div",me,[o("div",_e,[pe,o("span",{class:"record",onClick:e[0]||(e[0]=(...c)=>d.getRecord&&d.getRecord(...c))},[f("收支明细"),n(b,{name:"arrow"})])]),o("div",ue,l(t.score),1)]),n(T,{active:t.active,"onUpdate:active":e[1]||(e[1]=c=>t.active=c),animated:"","line-height":"4px","line-width":"20px","title-active-color":"#1F263D"},{default:m(()=>[(i(!0),a(C,null,k(t.tabs,(c,h)=>(i(),G(M,{key:h,title:c.title},{default:m(()=>[h===0?(i(),a("div",he,[(i(!0),a(C,null,k(t.inList,(r,p)=>(i(),a("div",{class:"record-item",key:p,onClick:y=>d.handleClick(r,1)},[o("div",ge,[n(B,{src:t.WithdrawIcon,width:"30",height:"30"},null,8,["src"]),o("span",null,l(r.money)+"元",1)]),o("div",ve,l(r.score)+"积分",1)],8,fe))),128))])):(i(),a("div",ye,[(i(!0),a(C,null,k(t.exList,(r,p)=>(i(),a("div",{class:"record-item",key:p,onClick:y=>d.handleClick(r,2)},[o("div",Ce,[n(B,{src:t.ChargeCoin,width:"30",height:"30"},null,8,["src"]),o("span",null,"兑换"+l(r.gold)+"金币",1)]),o("div",ke,l(r.score)+"积分",1)],8,we))),128))]))]),_:2},1032,["title"]))),128))]),_:1},8,["active"])]),n(O,{show:t.show,onClick:e[9]||(e[9]=c=>t.show=!1)},{default:m(()=>{var c,h,r,p,y,L;return[o("div",{class:"wrapper",onClick:e[8]||(e[8]=R(()=>{},["stop"]))},[o("div",{class:"close",onClick:e[2]||(e[2]=u=>t.show=!1)},[n(b,{name:"cross"})]),((c=t.editItem)==null?void 0:c.type)===1?(i(),a("div",Ie,[o("div",xe,"提现 "+l((h=t.editItem)==null?void 0:h.money)+"元",1),o("div",be,"花费："+l((r=t.editItem)==null?void 0:r.score)+"积分 ",1),n(v,{class:"confirm",type:"primary",round:"",block:"",onClick:e[3]||(e[3]=u=>d.handleConfirm(1))},{default:m(()=>[f("确认兑换")]),_:1}),n(v,{type:"primary",round:"",block:"",onClick:e[4]||(e[4]=u=>t.show=!1)},{default:m(()=>[f("取消")]),_:1}),o("div",{class:"more",onClick:e[5]||(e[5]=(...u)=>d.handleDialog&&d.handleDialog(...u))},"了解手续费")])):S("",!0),((p=t.editItem)==null?void 0:p.type)===2?(i(),a("div",Be,[o("div",Le,"兑换 "+l((y=t.editItem)==null?void 0:y.gold)+" 金币",1),o("div",Se,"花费："+l((L=t.editItem)==null?void 0:L.score)+"积分 ",1),n(v,{class:"confirm",type:"primary",round:"",block:"",onClick:e[6]||(e[6]=u=>d.handleConfirm(2))},{default:m(()=>[f("确认兑换")]),_:1}),n(v,{type:"primary",round:"",block:"",onClick:e[7]||(e[7]=u=>t.show=!1)},{default:m(()=>[f("取消")]),_:1})])):S("",!0)])]}),_:1},8,["show"])])}const De=N(ae,[["render",Ae],["__scopeId","data-v-74592ac4"]]);F(De).mount("#root");

import{_ as k,c as w,b as i,a as s,t as v,o as f,p as b,d as T,e as I}from"./_plugin-vue_export-helper-d3f0869d.js";import{I as y}from"./index-932018bd.js";import{I as C}from"./index-a767b5e2.js";import{_ as L}from"./nav-bar-04c40775.js";import{K as _,a1 as j}from"./api-5dfe9da6.js";import{a as p}from"./function-call-3431ac22.js";import"./use-touch-44153586.js";import"./index-b00f40b6.js";import"./index-f3d48844.js";const S=""+new URL("ic_edit_name-b877069b.svg",import.meta.url).href;const x={name:"KonkeSdk4YinYueSrcApp",data(){return{userHeader:"",userToken:{}}},mounted(){window.__eventBus.on("reload",o=>{window.__jsb.getLoginUserInfo().then(e=>{var n,a;this.userToken=e.userToken,this.userHeader=_+((a=(n=this.userToken)==null?void 0:n.user)==null?void 0:a.avatar),console.log(this.userToken)}).catch(e=>{p(e)})}),window.__jsb.getLoginUserInfo().then(o=>{var e,n;this.userToken=o.userToken,this.userHeader=_+((n=(e=this.userToken)==null?void 0:e.user)==null?void 0:n.avatar),console.log(this.userToken)}).catch(o=>{p(o)})},methods:{onClickLeft(){window.__jsb.pop()},async logout(){try{await j()}catch(o){console.log(o)}finally{window.__jsb.setLoginUserInfo(null),window.__jsb.replace({route:"login"})}},toForgetPwd(){const o=window.__cloudConfig_appKey,e=_+"/h5/konke/forget?redirect=doClose&appKey="+o;window.__jsb.goToAppWebview({url:e,title:"修改密码"})},toEditName(){window.__jsb.push({route:"user-editnickname"})}}},c=o=>(b("data-v-7a73b2ba"),o=o(),T(),o),A={class:"home"},B={class:"user"},N={class:"user_header"},U={class:"user_nickname"},E=c(()=>s("div",{class:"divider"},null,-1)),H=c(()=>s("span",{class:"change_pwd_hint"}," 修改密码",-1)),K=c(()=>s("div",{class:"divider"},null,-1));function F(o,e,n,a,d,t){var l,u;const m=L,g=C,h=y;return f(),w("div",A,[i(m,{class:"nav_bar",title:"我的",onClickLeft:t.onClickLeft},null,8,["onClickLeft"]),s("div",B,[s("div",N,[i(g,{width:"70px",height:"70px",src:d.userHeader},null,8,["src"])]),s("div",U,v((u=(l=d.userToken)==null?void 0:l.user)==null?void 0:u.nickname),1),s("img",{class:"user_nickname_edit",src:S,onClick:e[0]||(e[0]=(...r)=>t.toEditName&&t.toEditName(...r))})]),E,s("div",{class:"change_pwd",onClick:e[1]||(e[1]=(...r)=>t.toForgetPwd&&t.toForgetPwd(...r))},[H,i(h,{class:"right",name:"arrow"})]),K,s("div",{class:"login_out",onClick:e[2]||(e[2]=(...r)=>t.logout&&t.logout(...r))},"退出登录")])}const P=k(x,[["render",F],["__scopeId","data-v-7a73b2ba"]]);I(P).mount("#root");

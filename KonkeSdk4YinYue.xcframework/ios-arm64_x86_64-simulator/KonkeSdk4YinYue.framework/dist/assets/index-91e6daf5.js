import{u as S,N as z,U as A,B as L,ae as M,af as U,ad as G,a as l,m as k,q as T,M as W,z as x,w as p,W as H,$ as q,A as _,s as Q,S as V,x as Y,aa as j,G as J,Q as X,L as Z,aG as ee,az as D,a6 as te}from"./_plugin-vue_export-helper-ae94e834.js";import{p as ne,a as oe,P as ae}from"./index-c49f2c8f.js";import{B as P}from"./index-46966e79.js";import{o as le}from"./on-popup-reopen-34d1e964.js";import{u as se}from"./use-expose-833097fe.js";import{r as ce,u as re}from"./use-route-fa444ad9.js";import{a as ie,e as ue}from"./constant-eb256a74.js";import{c as de}from"./interceptor-c174082f.js";const fe=(e,s)=>{const n=S(),o=()=>{n.value=G(e).height};return z(()=>{if(A(o),s)for(let a=1;a<=3;a++)setTimeout(o,100*a)}),le(()=>A(o)),L([M,U],o),n};function me(e,s){const n=fe(e,!0);return o=>l("div",{class:s("placeholder"),style:{height:n.value?`${n.value}px`:void 0}},[o()])}const[O,R]=k("action-bar"),$=Symbol(O),Be={placeholder:Boolean,safeAreaInsetBottom:x};var ge=T({name:O,props:Be,setup(e,{slots:s}){const n=S(),o=me(n,R),{linkChildren:a}=W($);a();const f=()=>{var m;return l("div",{ref:n,class:[R(),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[(m=s.default)==null?void 0:m.call(s)])};return()=>e.placeholder?o(f):f()}});const he=p(ge),[we,ve]=k("action-bar-button"),be=H({},ce,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Ce=T({name:we,props:be,setup(e,{slots:s}){const n=re(),{parent:o,index:a}=q($),f=_(()=>{if(o){const r=o.children[a.value-1];return!(r&&"isButton"in r)}}),m=_(()=>{if(o){const r=o.children[a.value+1];return!(r&&"isButton"in r)}});return se({isButton:!0}),()=>{const{type:r,icon:B,text:g,color:v,loading:b,disabled:C}=e;return l(P,{class:ve([r,{last:m.value,first:f.value}]),size:"large",type:r,icon:B,color:v,loading:b,disabled:C,onClick:n},{default:()=>[s.default?s.default():g]})}}});const E=p(Ce),[ye,i,w]=k("dialog"),xe=H({},ne,{title:String,theme:String,width:Q,message:[String,Function],callback:Function,allowHtml:Boolean,className:V,transition:Y("van-dialog-bounce"),messageAlign:String,closeOnPopstate:x,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:x,closeOnClickOverlay:Boolean}),Pe=[...oe,"transition","closeOnPopstate"];var Se=T({name:ye,props:xe,emits:["confirm","cancel","keydown","update:show"],setup(e,{emit:s,slots:n}){const o=S(),a=j({confirm:!1,cancel:!1}),f=t=>s("update:show",t),m=t=>{var c;f(!1),(c=e.callback)==null||c.call(e,t)},r=t=>()=>{e.show&&(s(t),e.beforeClose?(a[t]=!0,de(e.beforeClose,{args:[t],done(){m(t),a[t]=!1},canceled(){a[t]=!1}})):m(t))},B=r("cancel"),g=r("confirm"),v=ee(t=>{var c,u;if(t.target!==((u=(c=o.value)==null?void 0:c.popupRef)==null?void 0:u.value))return;({Enter:e.showConfirmButton?g:D,Escape:e.showCancelButton?B:D})[t.key](),s("keydown",t)},["enter","esc"]),b=()=>{const t=n.title?n.title():e.title;if(t)return l("div",{class:i("header",{isolated:!e.message&&!n.default})},[t])},C=t=>{const{message:c,allowHtml:u,messageAlign:d}=e,h=i("message",{"has-title":t,[d]:d}),y=te(c)?c():c;return u&&typeof y=="string"?l("div",{class:h,innerHTML:y},null):l("div",{class:h},[y])},N=()=>{if(n.default)return l("div",{class:i("content")},[n.default()]);const{title:t,message:c,allowHtml:u}=e;if(c){const d=!!(t||n.title);return l("div",{key:u?1:0,class:i("content",{isolated:!d})},[C(d)])}},F=()=>l("div",{class:[ue,i("footer")]},[e.showCancelButton&&l(P,{size:"large",text:e.cancelButtonText||w("cancel"),class:i("cancel"),style:{color:e.cancelButtonColor},loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&l(P,{size:"large",text:e.confirmButtonText||w("confirm"),class:[i("confirm"),{[ie]:e.showCancelButton}],style:{color:e.confirmButtonColor},loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]),I=()=>l(he,{class:i("footer")},{default:()=>[e.showCancelButton&&l(E,{type:"warning",text:e.cancelButtonText||w("cancel"),class:i("cancel"),color:e.cancelButtonColor,loading:a.cancel,disabled:e.cancelButtonDisabled,onClick:B},null),e.showConfirmButton&&l(E,{type:"danger",text:e.confirmButtonText||w("confirm"),class:i("confirm"),color:e.confirmButtonColor,loading:a.confirm,disabled:e.confirmButtonDisabled,onClick:g},null)]}),K=()=>n.footer?n.footer():e.theme==="round-button"?I():F();return()=>{const{width:t,title:c,theme:u,message:d,className:h}=e;return l(ae,J({ref:o,role:"dialog",class:[i([u]),h],style:{width:Z(t)},tabindex:0,"aria-labelledby":c||d,onKeydown:v,"onUpdate:show":f},X(e,Pe)),{default:()=>[b(),N(),K()]})}}});const He=p(Se);export{He as D,Se as s};

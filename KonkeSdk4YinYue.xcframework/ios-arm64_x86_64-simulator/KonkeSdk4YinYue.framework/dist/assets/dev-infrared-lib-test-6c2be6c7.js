import{_ as b,o as f,c as C,a as o,t as c,b as i,w as _,d as m,e as w}from"./_plugin-vue_export-helper-4dcb9733.js";import{S as I}from"./sure-alert-985ba23f.js";import{w as x}from"./index-911a1983.js";/* empty css              *//* empty css              *//* empty css              */import{B as L}from"./index-6973aeba.js";import{_ as y}from"./nav-bar-2d16eeee.js";import{g as k}from"./urlparse-f25d0f77.js";import{i as B,a as T,d as A}from"./api-a6d3b59a.js";import{s as U,a}from"./function-call-fc609343.js";import{P as O}from"./index-bc3726e2.js";import"./use-route-83ee6a88.js";import"./index-16a23f12.js";import"./use-touch-3e361956.js";x(U);const P={name:"infrared-able",props:{text:""},data(){return{}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){this.$emit("onConfirm")}}},R={class:"demo-component"},D={class:"text"},E={class:"btn_line"},S={class:"btn_cancel"},j={class:"btn_sure"};function K(e,t,d,h,n,s){const l=L;return f(),C("div",R,[o("div",D,c(d.text),1),o("div",E,[o("div",S,[i(l,{type:"success",color:"#FFDEC8",onClick:s.onClickLeft},{default:_(()=>[m("不可用")]),_:1},8,["onClick"])]),o("div",j,[i(l,{type:"success",color:"#FD7D28",onClick:s.onClickRight},{default:_(()=>[m(" 可用 ")]),_:1},8,["onClick"])])])])}const N=b(P,[["render",K],["__scopeId","data-v-147b4e99"]]),p=""+new URL("ic_infrared_power-817c6f9d.svg",import.meta.url).href,F=""+new URL("ic_infrared_temp_add-87e0d3ef.svg",import.meta.url).href,H=""+new URL("ic_infrared_temp_sub-160f5370.svg",import.meta.url).href,V=""+new URL("ic_infrared_sound_add-ab45f8c1.svg",import.meta.url).href,M=""+new URL("ic_infrared_sound_sub-66647725.svg",import.meta.url).href;const q={components:{SureAlert:I},data(){return{lib_enable_show:!1,hint_pop_show:!1,libList:[],curLibIndex:0,devId:-1,brandId:-1,type:"",testBtnImg:p,acTestKey:[1,13,14],tvTestKey:[1,3,2],curCodeIndex:0,enabletext:"",codeLibId:0,nodeId:""}},mounted(){this.getUrlParams()},methods:{getUrlParams(){let e=window.location.search;const t=k(e);console.log(t),t!=null&&"devId"in t&&(this.devId=t.devId,console.log(this.devId)),t!=null&&"type"in t&&(this.type=t.type),t!=null&&"brandId"in t&&(this.brandId=t.brandId),t!=null&&"nodeId"in t&&(this.nodeId=t.nodeId),this.getLibs()},onClickLeft(){window.__jsb.pop()},getLibs(){B(this.devId,this.brandId,this.type).then(e=>{if(this.libList=e.data.modelList,this.libList==null||this.libList.length==0){a("没有获取到码库,请返回选择其他品牌");return}this.getCodes()}).catch(e=>{a(e)})},getCodes(){T(this.devId,this.brandId,this.type,this.libList[this.curLibIndex]).then(e=>{console.log("codes",e),this.codeLibId=e.data.codeList[0]}).catch(e=>{a(e)})},onClickHint(){this.hint_pop_show=!1},onEnableCancel(){if(this.curLibIndex>=this.libList.length-1){a("该品牌码库已匹配结束,请返回上一级选择其他品牌");return}this.curCodeIndex=0,this.curLibIndex++,this.getCodes(),this.changeBtn(),this.hint_pop_show=!0,this.lib_enable_show=!1},onEnableConfirm(){if(this.lib_enable_show=!1,this.curCodeIndex==2){let e={};e.rcType=this.type,e.codeId=this.codeLibId,e.codeType="cloud",window.__jsb.forwardEvent({eventName:"infraredLibCode",eventData:e,fromPage:"dev-infrared-lib-test",toPage:"dev-infrared-edit"}),window.__jsb.pop({route:"dev-infrared-edit"});return}this.curCodeIndex++,this.changeBtn()},sendCode(){const e=this.type=="AC"?this.acTestKey[this.curCodeIndex]:this.tvTestKey[this.curCodeIndex];A(this.devId,"Testing",{value:e,codeLibId:this.codeLibId,nodeId:this.nodeId}).then(t=>{console.log("Testing",t),this.lib_enable_show=!0}).catch(t=>{a(t)})},changeBtn(){if(!(this.curCodeIndex>2))if(this.type=="AC")switch(this.curCodeIndex){case 0:this.testBtnImg=p;break;case 1:this.testBtnImg=F;break;case 2:this.testBtnImg=H;break}else switch(this.curCodeIndex){case 0:this.testBtnImg=p;break;case 1:this.testBtnImg=V;break;case 2:this.testBtnImg=M;break}},uuid(){for(var e=[],t="0123456789abcdef",d=0;d<32;d++)e[d]=t.substr(Math.floor(Math.random()*16),1);e[14]="4",e[19]=t.substr(e[19]&3|8,1),e[8]=e[13]=e[18]=e[23];var h=e.join("");return h}}},z={class:"home"},G={class:"test_group"},J={class:"test_hint"},Q=["src"];function W(e,t,d,h,n,s){const l=y,g=N,u=O,v=I;return f(),C("div",z,[i(l,{class:"nav_bar",title:"匹配码库",onClickLeft:s.onClickLeft},null,8,["onClickLeft"]),o("div",G,"正在测试第"+c(n.curLibIndex+1)+"组(一共"+c(n.libList.length)+"组)",1),o("div",J,"请将红外遥控器对准"+c(n.type=="AC"?"空调":"电视")+"，点击下面按钮 然后确认"+c(n.type=="AC"?"空调":"电视")+"是否有响应 ",1),o("div",{class:"test_btn",onClick:t[0]||(t[0]=(...r)=>s.sendCode&&s.sendCode(...r))},[o("img",{src:n.testBtnImg},null,8,Q)]),i(u,{show:n.lib_enable_show,"onUpdate:show":t[1]||(t[1]=r=>n.lib_enable_show=r),round:"",position:"bottom"},{default:_(()=>[i(g,{text:"设备是否可用",onOnCancal:s.onEnableCancel,onOnConfirm:s.onEnableConfirm},null,8,["onOnCancal","onOnConfirm"])]),_:1},8,["show"]),i(u,{show:n.hint_pop_show,"onUpdate:show":t[2]||(t[2]=r=>n.hint_pop_show=r),round:"",position:"center",style:{paddingLeft:"64px",paddingRight:"64px"}},{default:_(()=>[i(v,{text:"请先关闭您的"+(n.type=="AC"?"空调":"电视")+"，再开始进行匹配",cancelText:"返回",sureText:"确定已关闭",onOnCancal:s.onClickHint,onOnConfirm:s.onClickHint},null,8,["text","onOnCancal","onOnConfirm"])]),_:1},8,["show"])])}const X=b(q,[["render",W],["__scopeId","data-v-1bcac437"]]);w(X).mount("#root");

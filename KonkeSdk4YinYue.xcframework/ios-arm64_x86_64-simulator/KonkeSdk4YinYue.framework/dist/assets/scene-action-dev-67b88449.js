import{_ as y,o as r,c as u,b as l,a as o,t as _,p as S,d as b,w as x,F as D,r as O,j as E,g as v,v as C,l as g,e as j}from"./_plugin-vue_export-helper-441d49bc.js";import"./index-3c7dc3c1.js";/* empty css              *//* empty css              */import{E as H}from"./index-3c7cc260.js";import{T as K,a as B}from"./index-52a57577.js";import{_ as w}from"./nav-bar-d5f559a7.js";import{C as A,a as G}from"./index-93f37fed.js";import"./index-1edddc79.js";/* empty css              */import{T}from"./index-e63d6a20.js";import{a as p}from"./function-call-06d9c54b.js";import{C as J}from"./index-7c2bb3de.js";import{C as Y}from"./index-88c0c3e3.js";import{d as z,r as q,v as Q}from"./api-69fa8fe6.js";import{S as W}from"./scene-action-light-component-ae8c8176.js";import{g as X}from"./dev-image-f6fc399c.js";import{g as Z}from"./urlparse-f25d0f77.js";import{P as $}from"./index-9bebd057.js";import"./use-id-bbee3c24.js";import"./use-touch-a55357c8.js";import"./use-route-ace38816.js";import"./index-1c01d136.js";const ee={name:"SceneActionAc",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checkIndex:-1,list:[{name:"打开",action:"TurnOn",check:!1,extension:null},{name:"关闭",action:"TurnOff",check:!1,extension:null}],checked:[],deley:0}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){for(let t in this.list)if(this.list[t].check){this.checkIndex==t;break}if(console.log("checked",this.checked),this.checkIndex==-1){p("必须选择一个动作");return}console.log("checkIndex",this.checkIndex);let e=null;if(this.checkIndex==2||this.checkIndex==3){const t=this.list[this.checkIndex].extension;if(console.log("extList",t),t.forEach(s=>{s.check&&(e=s)}),console.log("extension",e),e==null){p("必须选择一个动作参数");return}}else this.checkIndex==4&&(e=this.list[this.checkIndex].extension);this.$emit("onConfirm",this.dev,this.checked[0],this.deley,e)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},clickMode(e,t){e.forEach(s=>{s.check=s.workMode==t.workMode})},clickSpeed(e,t){e.forEach(s=>{s.check=s.windSpeed==t.windSpeed})},clickCheck(e){console.log(e),this.checked.splice(0,this.checked.length),this.checked.push(this.list[e].action),this.checkIndex=e,console.log(this.checked);for(let t in this.list)this.list[t].check=e==t}}},P=e=>(S("data-v-40f0964f"),e=e(),b(),e),te={class:"demo-component"},ne={class:"time_sel_bg"},oe={class:"time_show_line"},se=P(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),ce={class:"time_show_line_time"},ie={class:"time_sel"},le={class:"time_sel_child"},he={class:"action_list"},ae={class:"turn_sel"},re={class:"turn_name"},de={class:"checkbox"},_e=P(()=>o("div",{class:"divider"},null,-1)),me={class:"turn_sel"},ue={class:"turn_name"},fe={class:"checkbox"};function ke(e,t,s,h,n,c){const f=w,k=T,a=A;return r(),u("div",te,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",ne,[o("div",oe,[se,o("span",ce,_(n.seldata),1)]),o("div",ie,[o("div",le,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=i=>n.currentTime=i),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",he,[o("div",ae,[o("span",re,_(n.list[0].name),1),o("div",de,[l(a,{modelValue:n.list[0].check,"onUpdate:modelValue":t[1]||(t[1]=i=>n.list[0].check=i),onClick:t[2]||(t[2]=i=>c.clickCheck(0))},null,8,["modelValue"])])]),_e,o("div",me,[o("span",ue,_(n.list[1].name),1),o("div",fe,[l(a,{modelValue:n.list[1].check,"onUpdate:modelValue":t[3]||(t[3]=i=>n.list[1].check=i),onClick:t[4]||(t[4]=i=>c.clickCheck(1))},null,8,["modelValue"])])])])])}const pe=y(ee,[["render",ke],["__scopeId","data-v-40f0964f"]]);const ve={name:"SceneActionFh",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checkIndex:-1,list:[{name:"打开",action:"TurnOn",check:!1,extension:null},{name:"关闭",action:"TurnOff",check:!1,extension:null}],checked:[],deley:0}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){for(let t in this.list)if(this.list[t].check){this.checkIndex==t;break}if(console.log("checked",this.checked),this.checkIndex==-1){p("必须选择一个动作");return}let e=null;this.checkIndex==2&&(e=this.list[this.checkIndex].extension),this.$emit("onConfirm",this.dev,this.checked[0],this.deley,e)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},clickMode(e,t){e.forEach(s=>{s.check=s.workMode==t.workMode})},clickSpeed(e,t){e.forEach(s=>{s.check=s.windSpeed==t.windSpeed})},clickCheck(e){console.log(e),this.checked.splice(0,this.checked.length),this.checked.push(this.list[e].action),this.checkIndex=e;for(let t in this.list)this.list[t].check=e==t}}},U=e=>(S("data-v-af553af9"),e=e(),b(),e),Ce={class:"demo-component"},ge={class:"time_sel_bg"},xe={class:"time_show_line"},ye=U(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),we={class:"time_show_line_time"},Se={class:"time_sel"},be={class:"time_sel_child"},Ae={class:"action_list"},Te={class:"turn_sel"},Le={class:"turn_name"},Ie={class:"checkbox"},Ve=U(()=>o("div",{class:"divider"},null,-1)),De={class:"turn_sel"},Oe={class:"turn_name"},Re={class:"checkbox"};function Fe(e,t,s,h,n,c){const f=w,k=T,a=A;return r(),u("div",Ce,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",ge,[o("div",xe,[ye,o("span",we,_(n.seldata),1)]),o("div",Se,[o("div",be,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=i=>n.currentTime=i),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",Ae,[o("div",Te,[o("span",Le,_(n.list[0].name),1),o("div",Ie,[l(a,{modelValue:n.list[0].check,"onUpdate:modelValue":t[1]||(t[1]=i=>n.list[0].check=i),onClick:t[2]||(t[2]=i=>c.clickCheck(0))},null,8,["modelValue"])])]),Ve,o("div",De,[o("span",Oe,_(n.list[1].name),1),o("div",Re,[l(a,{modelValue:n.list[1].check,"onUpdate:modelValue":t[3]||(t[3]=i=>n.list[1].check=i),onClick:t[4]||(t[4]=i=>c.clickCheck(1))},null,8,["modelValue"])])])])])}const Ee=y(ve,[["render",Fe],["__scopeId","data-v-af553af9"]]);const Pe={name:"SceneActionFrishair",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checkIndex:-1,list:[{name:"打开",action:"TurnOn",check:!1,extension:null},{name:"关闭",action:"TurnOff",check:!1,extension:null}],checked:[],deley:0}},mounted(){},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){for(let t in this.list)if(this.list[t].check){this.checkIndex==t;break}if(console.log("checked",this.checked),this.checkIndex==-1){p("必须选择一个动作");return}let e=null;if(this.checkIndex==2||this.checkIndex==3){if(this.list[this.checkIndex].extension.forEach(s=>{s.check&&(e=s)}),e==null){p("必须选择一个动作参数");return}}else this.checkIndex==4&&(e=this.list[this.checkIndex].extension);this.$emit("onConfirm",this.dev,this.checked[0],this.deley,e)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},clickMode(e,t){e.forEach(s=>{s.check=s.workMode==t.workMode})},clickSpeed(e,t){e.forEach(s=>{s.check=s.windSpeed==t.windSpeed})},clickCheck(e){console.log(e),this.checked.splice(0,this.checked.length),this.checked.push(this.list[e].action),this.checkIndex=e;for(let t in this.list)this.list[t].check=e==t}}},N=e=>(S("data-v-4e923ffd"),e=e(),b(),e),Ue={class:"demo-component"},Ne={class:"time_sel_bg"},Me={class:"time_show_line"},je=N(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),He={class:"time_show_line_time"},Ke={class:"time_sel"},Be={class:"time_sel_child"},Ge={class:"action_list"},Je={class:"turn_sel"},Ye={class:"turn_name"},ze={class:"checkbox"},qe=N(()=>o("div",{class:"divider"},null,-1)),Qe={class:"turn_sel"},We={class:"turn_name"},Xe={class:"checkbox"};function Ze(e,t,s,h,n,c){const f=w,k=T,a=A;return r(),u("div",Ue,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",Ne,[o("div",Me,[je,o("span",He,_(n.seldata),1)]),o("div",Ke,[o("div",Be,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=i=>n.currentTime=i),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",Ge,[o("div",Je,[o("span",Ye,_(n.list[0].name),1),o("div",ze,[l(a,{modelValue:n.list[0].check,"onUpdate:modelValue":t[1]||(t[1]=i=>n.list[0].check=i),onClick:t[2]||(t[2]=i=>c.clickCheck(0))},null,8,["modelValue"])])]),qe,o("div",Qe,[o("span",We,_(n.list[1].name),1),o("div",Xe,[l(a,{modelValue:n.list[1].check,"onUpdate:modelValue":t[3]||(t[3]=i=>n.list[1].check=i),onClick:t[4]||(t[4]=i=>c.clickCheck(1))},null,8,["modelValue"])])])])])}const $e=y(Pe,[["render",Ze],["__scopeId","data-v-4e923ffd"]]);const et={name:"SceneActionInfrared",props:{dev:{}},data(){return{columnsType:["minute","second"],currentTime:["00","00"],formatter:(h,n)=>(h==="hour"?n.text+="时":h==="minute"?n.text+="分":n.text+="秒",n),seldata:"00:00",checked:[],list:[],deley:0}},mounted(){this.getKeys()},methods:{onClickLeft(){this.$emit("onCancal","")},onClickRight(){if(console.log("checked",this.checked),this.checked.length==0){p("必须选择一个动作");return}let e={};this.list.forEach(s=>{s.keyId==this.checked[0]&&(e=s)});const t={keyID:e.keyId};this.$emit("onConfirm",this.dev,"SendData",this.deley,t)},toggle(e,t){this.checked.splice(0,this.checked.length),this.checked.push(t),console.log(this.checked)},onTimeChange(e){this.seldata=e.selectedValues[0]+":"+e.selectedValues[1],this.deley=e.selectedValues[0]*60+e.selectedValues[1]},getKeys(){z(this.dev.userDeviceId).then(e=>{this.list=e.data.remoterKeysList}).catch(e=>console.log(e))}}},tt=e=>(S("data-v-4df0d28f"),e=e(),b(),e),nt={class:"demo-component"},ot={class:"time_sel_bg"},st={class:"time_show_line"},ct=tt(()=>o("span",{class:"time_show_line_hint"}," 延迟时间 ",-1)),it={class:"time_show_line_time"},lt={class:"time_sel"},ht={class:"time_sel_child"},at={class:"action_list"};function rt(e,t,s,h,n,c){const f=w,k=T,a=A,i=Y,L=J,I=G;return r(),u("div",nt,[l(f,{class:"nav_bar",title:"选择动作","left-text":"取消","right-text":"确定",onClickRight:c.onClickRight,fixed:!1,onClickLeft:c.onClickLeft},null,8,["onClickRight","onClickLeft"]),o("div",ot,[o("div",st,[ct,o("span",it,_(n.seldata),1)]),o("div",lt,[o("div",ht,[l(k,{"option-height":35,"visible-option-num":3,"show-toolbar":!1,modelValue:n.currentTime,"onUpdate:modelValue":t[0]||(t[0]=m=>n.currentTime=m),formatter:n.formatter,title:"选择时间","columns-type":n.columnsType,onChange:c.onTimeChange},null,8,["modelValue","formatter","columns-type","onChange"])])])]),o("div",at,[l(I,{modelValue:n.checked,"onUpdate:modelValue":t[1]||(t[1]=m=>n.checked=m)},{default:x(()=>[l(L,{inset:""},{default:x(()=>[(r(!0),u(D,null,O(n.list,(m,V)=>(r(),E(i,{clickable:"",key:m,title:m.keyName,onClick:R=>c.toggle(V,m.keyId)},{"right-icon":x(()=>[l(a,{name:m.keyId},null,8,["name"])]),_:2},1032,["title","onClick"]))),128))]),_:1})]),_:1},8,["modelValue"])])])}const dt=y(et,[["render",rt],["__scopeId","data-v-4df0d28f"]]);const _t={name:"KonkeSdk4YinYueSrcApp",components:{SceneActionLight:W,SceneActionAc:pe,SceneActionFh:Ee,SceneActionFrishair:$e,SceneActionInfrared:dt},data(){return{dev:{userDeviceId:1},show:!1,active:0,roomList:[],deviceList:[],getDevImage:X,type:"",actionShow:{light:!1,ac:!1,floorHeart:!1,freshair:!1,infrared:!0},supportTypeList:["AirCondition","AirFresher","FloorHeating","Light","Curtains"]}},mounted(){this.loadRoomList(),this.getParams()},methods:{onClickLeft(){window.__jsb.pop()},getParams(){let e=window.location.search;const t=Z(e);t!=null&&"type"in t&&(this.type=t.type)},clickDev(e){switch(this.actionShow={light:!1,ac:!1,floorHeart:!1,freshair:!1,infrared:!1},this.dev=e,this.show=!0,e.device.cateType){case"Curtains":case"Light":this.actionShow.light=!0;break;case"FloorHeating":this.actionShow.floorHeart=!0;break;case"AirFresher":this.actionShow.freshair=!0;break;case"AirCondition":this.actionShow.ac=!0;break}console.log(this.actionShow)},onActionSelCancel(){console.log("onActionSelCansel")},onActionSelConfirm(e,t,s){console.log("onActionSelConfirm",this.dev.userDeviceId,t);const h={actionType:"Device",delayTime:s,inner:!1,userDeviceId:e.userDeviceId,actionName:t,extension:"",userDevice:e};this.callbackParams(h)},onAcActionSelCancel(){this.actionShow={light:!1,ac:!1,floorheart:!1,freshair:!1,infrared:!1},this.show=!1},onAcActionSelConfirm(e,t,s,h){console.log("onAcActionSelConfirm",this.dev.userDeviceId,t,h);const n={actionType:"Device",delayTime:s,inner:!1,userDeviceId:e.userDeviceId,actionName:t,extension:h,userDevice:e};this.callbackParams(n)},callbackParams(e){window.__jsb.forwardEvent({eventName:"pop",eventData:"",fromPage:"scene-action-dev",toPage:"scene-action-type"}),this.type=="auto"?window.__jsb.forwardEvent({eventName:"addDevAction",eventData:JSON.stringify(e),fromPage:"scene-action-dev",toPage:"scene-auto"}):window.__jsb.forwardEvent({eventName:"addDevAction",eventData:JSON.stringify(e),fromPage:"scene-action-dev",toPage:"scene-manual"}),window.__jsb.pop({route:this.type=="auto"?"scene-auto":"scene-manual"})},loadRoomList(){q().then(e=>{(e.code=200)&&(this.roomList=e.data.roomList,this.roomList!=null&&this.roomList.length>0&&(this.active=this.roomList[0].roomId,this.findRoomDev(this.roomList[0].roomId)))})},findRoomDev(e){Q(e).then(t=>{this.deviceList=t.data.userDeviceList,this.deviceList=this.deviceList.filter(s=>{var h,n;return console.log("filter",this.supportTypeList.includes((h=s==null?void 0:s.device)==null?void 0:h.cateType)),this.supportTypeList.includes((n=s==null?void 0:s.device)==null?void 0:n.cateType)})}).catch(t=>console.log(t))},onClickTab(){this.findRoomDev(this.roomList[this.active].roomId)}}},mt={class:"home"},ut={class:"dev"},ft={key:0,class:"no_dev"},kt=["onClick"],pt=["src"],vt={class:"dev_name"},Ct={class:"room_name"};function gt(e,t,s,h,n,c){const f=w,k=B,a=K,i=H,L=g("SceneActionLight"),I=g("SceneActionAc"),m=g("SceneActionFrishair"),V=g("SceneActionFh"),R=g("SceneActionInfrared"),M=$;return r(),u("div",mt,[l(f,{class:"nav_bar",title:"选择设备动作",onClickLeft:c.onClickLeft},null,8,["onClickLeft"]),l(a,{active:n.active,"onUpdate:active":t[0]||(t[0]=d=>n.active=d),onClickTab:c.onClickTab,color:"#FD7D28","title-active-color":"#FD7D28","title-inactive-color":"#666666",sticky:"",animated:"",shrink:""},{default:x(()=>[(r(!0),u(D,null,O(n.roomList,d=>(r(),E(k,{title:d.roomName},null,8,["title"]))),256))]),_:1},8,["active","onClickTab"]),o("div",ut,[n.deviceList==null||n.deviceList.length==0?(r(),u("div",ft,[l(i,{"image-size":"80",description:"房间下没有设备"})])):(r(!0),u(D,{key:1},O(n.deviceList,d=>{var F;return r(),u("div",{class:"dev_list",onClick:yt=>{c.clickDev(d)}},[o("img",{class:"dev_icon",src:n.getDevImage((F=d==null?void 0:d.device)==null?void 0:F.cateType)},null,8,pt),o("div",vt,[o("span",Ct,_(d.deviceName),1)])],8,kt)}),256))]),l(M,{show:n.show,"onUpdate:show":t[1]||(t[1]=d=>n.show=d),position:"bottom"},{default:x(()=>[v(l(L,{dev:n.dev,onOnCancal:c.onActionSelCancel,onOnConfirm:c.onActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.light]]),v(l(I,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.ac]]),v(l(m,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.freshair]]),v(l(V,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.floorHeart]]),v(l(R,{dev:n.dev,onOnCancal:c.onAcActionSelCancel,onOnConfirm:c.onAcActionSelConfirm},null,8,["dev","onOnCancal","onOnConfirm"]),[[C,n.actionShow.infrared]])]),_:1},8,["show"])])}const xt=y(_t,[["render",gt],["__scopeId","data-v-ebb472af"]]);j(xt).mount("#root");

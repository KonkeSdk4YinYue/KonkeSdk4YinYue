import{_ as y,c as n,a as e,d as l,b as _,F as k,r as I,e as C,o as r,f as U,i as B}from"./_plugin-vue_export-helper-ae94e834.js";/* empty css              */import{L as x}from"./index-5198b2b7.js";import{_ as d}from"./img-upload-096958ec.js";import{I as P}from"./index-9cad779b.js";import{_ as D}from"./navbar-dd7c7647.js";import{B as M}from"./index-46966e79.js";import{_ as N}from"./safe-area-top-6391331c.js";import{A as V}from"./album_delete-3f68ba0c.js";import{A as u}from"./api-3777ac7b.js";import{a as L}from"./function-call-d8608672.js";import{O as S}from"./index-6f826b23.js";/* empty css              */import"./index-015663ed.js";import"./use-touch-b8f7fc8d.js";import"./use-expose-833097fe.js";import"./on-popup-reopen-34d1e964.js";import"./index-ccf833f0.js";import"./index-c49f2c8f.js";import"./interceptor-c174082f.js";import"./constant-eb256a74.js";import"./index-52885be2.js";import"./use-route-fa444ad9.js";const j={name:"PersonalAlbum",components:{ImgUpload:d},data(){return{loading:!1,AlbumDelete:V,photoAlbum:[]}},computed:{},created(){this.getMyInfo()},methods:{showImagePreviewAt(o){__jsb.invoke({scope:"window",method:"push",params:{route:"image-viewer",images:this.photoAlbum,startPosition:o}})},async handleSubmit(){this.loading=!0;try{await u.updateAlbums({ossUrls:this.photoAlbum}),__jsb.pop()}catch(o){L(o.errMsg||"发布失败")}finally{this.loading=!1}},handleDelete(o){this.photoAlbum.splice(o,1)},handleUpload(o){const t=o[o.length-1];this.photoAlbum.push(t.url)},async getMyInfo(){const{data:o}=await u.getMyInfo(),{photoAlbum:t}=o||{};t&&(this.photoAlbum=t.split(","))}}},z={class:"personal-album"},F={class:"container"},O={key:0,class:"album-item"},T={class:"loading-container"};function E(o,t,G,H,a,s){var m;const h=N,f=M,g=D,i=P,b=d,v=x,A=S;return r(),n("div",z,[e(h),e(g,{title:"个人相册"},{default:l(()=>[e(f,{type:"primary",size:"small",round:"",class:"submit",onClick:s.handleSubmit},{default:l(()=>[U("完成")]),_:1},8,["onClick"])]),_:1}),_("div",F,[(r(!0),n(k,null,I(a.photoAlbum,(p,c)=>(r(),n("div",{class:"album-item",key:p},[e(i,{src:p,fit:"cover",onClick:w=>s.showImagePreviewAt(c)},null,8,["src","onClick"]),e(i,{src:a.AlbumDelete,width:"20",height:"20",class:"publish-delete",onClick:w=>s.handleDelete(c)},null,8,["src","onClick"])]))),128)),((m=a.photoAlbum)==null?void 0:m.length)<9?(r(),n("div",O,[e(b,{previewImage:!1,onChange:s.handleUpload,UploaderSize:"calc((100vw - 25px) / 3)",UploaderUploadBackground:"#fff"},null,8,["onChange"])])):C("",!0)]),e(A,{show:a.loading},{default:l(()=>[_("div",T,[e(v)])]),_:1},8,["show"])])}const q=y(j,[["render",E],["__scopeId","data-v-a2ee4f45"]]);B(q).mount("#root");

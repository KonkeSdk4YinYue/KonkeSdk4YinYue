import{_ as x,o as u,c as h,a as l,d as p,b as t,t as o,F as k,r as I,n as L,f as y,g as R,I as T,p as U,h as N}from"./_plugin-vue_export-helper-ae94e834.js";/* empty css              */import"./index-5198b2b7.js";import{B as O}from"./index-46966e79.js";import{I as V}from"./index-9cad779b.js";import{A as w}from"./api-3777ac7b.js";import{O as A}from"./index-6f826b23.js";const F=""+new URL("sign_box-cfe5f9d5.svg",import.meta.url).href,z=""+new URL("sign_coin_b-96bc0139.svg",import.meta.url).href,E=""+new URL("sign_coin_s-b0d37d3f.svg",import.meta.url).href,G=""+new URL("sign_done-2e74e56c.svg",import.meta.url).href;const M={props:{show:{type:Boolean,default:!1}},computed:{count(){const{config:n,signData:i}=this,{continueDays:a,gender:g}=i,s=n==null?void 0:n.find(e=>{const{continueDay:r,gold:d,score:_}=e;return a<r&&(g===1?d>5:_>2)});return{day:(s==null?void 0:s.continueDay)-a,number:g===1?s==null?void 0:s.gold:s==null?void 0:s.score}}},watch:{show(n){this.visible=n}},data(){return{SignCoinS:E,SignCoinB:z,SignDone:G,SignBox:F,visible:!1,signData:{},config:[],number:0,continueDays:0,nextBig:0,nextBigDays:0,isSign:!1}},async created(){this.getSignStatus()},methods:{async getSignStatus(){const{data:n}=await w.getSignStatus();this.signData=n;const{signTaskConfigBO:{config:i=[]}={}}=n,{gender:a}=n;this.config=i.map(g=>{const{gold:s,score:e}=g,r=a===1?s>5:e>2;return{...g,bigDay:r}})},async handleSign(){var n,i;try{const{data:a}=await w.setSign();this.isSign=!0;const{gold:g,score:s,continueDays:e,nextBigScore:r,nextBigDays:d,nextBigGold:_}=a;this.number=((n=this.signData)==null?void 0:n.gender)===2?s:g,this.continueDays=e,this.nextBigDays=d,this.nextBig=((i=this.signData)==null?void 0:i.gender)===2?r:_,this.getSignStatus()}catch(a){showToast(a.message||"签到失败")}},handleClose(){this.$emit("close")}}},B=n=>(U("data-v-8c21425c"),n=n(),N(),n),P={class:""},j={key:0},q=B(()=>t("div",{class:"title"},"连续签到领奖励",-1)),H={class:"tips"},J={class:"content"},K={class:"count"},Q={class:"text"},W={class:"btn"},X={key:1},Y=B(()=>t("div",{class:"success-tips"},"签到成功！恭喜你获得",-1)),Z={class:"success-count"},$={class:"success-text"},ss={class:"btn"};function ns(n,i,a,g,s,e){const r=V,d=O,_=T,C=A;return u(),h("div",P,[l(C,{show:a.show,onClick:e.handleClose},{default:p(()=>{var m,D,f,S;return[t("div",{class:"wrapper",onClick:i[1]||(i[1]=R(()=>{},["stop"]))},[s.isSign?(u(),h("div",X,[l(r,{src:s.SignCoinB,width:"56",height:"56",class:"sign-coin-b"},null,8,["src"]),Y,t("div",Z,[t("b",null,o(s.number),1),y(o(((f=s.signData)==null?void 0:f.gender)===1?"金币":"积分"),1)]),t("div",$,"已签到"+o(s.continueDays)+"天，再签到"+o(s.nextBigDays)+"天，可开"+o(s.nextBig)+o(((S=s.signData)==null?void 0:S.gender)===1?"金币":"积分")+"宝箱",1),t("div",ss,[l(d,{type:"primary",round:"",block:"",onClick:e.handleClose},{default:p(()=>[y("确定")]),_:1},8,["onClick"])])])):(u(),h("div",j,[q,t("div",H,"再签到"+o(e.count.day)+"天，可开"+o(e.count.number)+o(((m=s.signData)==null?void 0:m.gender)===1?"金币":"积分")+"宝箱",1),t("div",J,[(u(!0),h(k,null,I(s.config,(c,v)=>{var b;return u(),h("div",{class:L(["item",{done:v<s.signData.continueDays,big:c.bigDay}]),key:v},[l(r,{src:c.bigDay?s.SignBox:s.SignCoinS,width:"20",height:"20",class:"coin-s"},null,8,["src"]),l(r,{src:s.SignDone,width:"12",height:"12",class:"done-icon"},null,8,["src"]),t("span",K," +"+o(((b=s.signData)==null?void 0:b.gender)===1?c.gold:c.score),1),t("span",Q,o(c.bigDay?"大奖日":`${c.continueDay}天`),1)],2)}),128))]),t("div",W,[l(d,{type:"primary",round:"",block:"",disabled:(D=s.signData)==null?void 0:D.signed,onClick:e.handleSign},{default:p(()=>{var c;return[y(o((c=s.signData)!=null&&c.signed?"明日继续":"签到"),1)]}),_:1},8,["disabled","onClick"])])])),t("div",{class:"close",onClick:i[0]||(i[0]=(...c)=>e.handleClose&&e.handleClose(...c))},[l(_,{name:"cross"})])])]}),_:1},8,["show","onClick"])])}const gs=x(M,[["render",ns],["__scopeId","data-v-8c21425c"]]);export{z as S,gs as _};

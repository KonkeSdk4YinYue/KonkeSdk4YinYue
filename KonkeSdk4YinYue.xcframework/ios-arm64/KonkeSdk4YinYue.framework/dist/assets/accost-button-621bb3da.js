import{_ as p,o as a,c as o,b as n,e as c,ac as g,l as v,a as d,f as m,t as y,d as k}from"./_plugin-vue_export-helper-ae94e834.js";import"./index-5198b2b7.js";import{B as I}from"./index-46966e79.js";import{I as b}from"./index-9cad779b.js";import{D as x}from"./default_female_avatar-3bbfb1af.js";import{A as S}from"./api-3777ac7b.js";import{a as w}from"./function-call-d8608672.js";const C=""+new URL("red_heart-4a1b2fad.svg",import.meta.url).href;const B={props:{userInfo:{type:Object,default:()=>{}},customer:{type:Boolean,default:!1}},data(){return{FemaleAvatar:x,accostSuccess:!1}},methods:{toUserDetail(){this.accostSuccess=!1,this.itemInfo={},__jsb.push({route:"chat",userInfo:this.userInfo})},async handleClick(){const{id:s}=this.userInfo;if(console.log(this.userInfo),!!s)try{const{success:t,message:e}=await S.accost({userId:s,timeStamp:new Date().getTime()});if(!t)throw new Error(e);this.accostSuccess=t,setTimeout(()=>{this.accostSuccess=!1},5e3)}catch(t){w(t.message||"搭讪失败")}}}},D={key:0,src:C,alt:""},A={key:1,style:{"margin-left":"5px"}},N={key:0,class:"fixed-accost"},T={class:"text"};function V(s,t,e,F,i,r){var l,u;const _=b,f=I;return a(),o("div",null,[n("div",{class:"accost-button",onClick:t[0]||(t[0]=(...h)=>r.handleClick&&r.handleClick(...h)),style:v({border:e.customer?"none":"1px solid rgba(31, 38, 61, 0.1)",padding:e.customer?"0":"12px"})},[e.customer?c("",!0):(a(),o("img",D)),e.customer?c("",!0):(a(),o("div",A,"搭讪")),e.customer?g(s.$slots,"default",{key:2},void 0,!0):c("",!0)],4),i.accostSuccess?(a(),o("div",N,[d(_,{fit:"cover",src:((l=e.userInfo)==null?void 0:l.headPic)||i.FemaleAvatar,width:"48",height:"48",radius:"20"},null,8,["src"]),n("div",T,[m(" 已搭讪"),n("span",null,y((u=e.userInfo)==null?void 0:u.nickName),1)]),d(f,{round:"",class:"accost-btn",onClick:r.toUserDetail},{default:k(()=>[m("去看看")]),_:1},8,["onClick"])])):c("",!0)])}const R=p(B,[["render",V],["__scopeId","data-v-b9a7efde"]]);export{R as _};

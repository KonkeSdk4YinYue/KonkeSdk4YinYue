import{j as B,m as v,x as I,J as T,a as l,q as O,g as M,D as N,k as z,H as L}from"./_plugin-vue_export-helper-4adca727.js";import{c as j,q,l as y,n as h,a7 as U,v as w,I as A,i as D,e as k,x as E,a1 as H}from"./index-f4bb52ea.js";import{u as V}from"./use-expose-f66499b2.js";import{P as J}from"./index-28bb2e26.js";import{L as _}from"./index-08ecd083.js";let d=0;function F(e){e?(d||document.body.classList.add("van-toast--unclickable"),d++):d&&(d--,d||document.body.classList.remove("van-toast--unclickable"))}const[G,c]=j("toast"),K=["show","overlay","teleport","transition","overlayClass","overlayStyle","closeOnClickOverlay"],Q={icon:String,show:Boolean,type:y("text"),overlay:Boolean,message:h,iconSize:h,duration:U(2e3),position:y("middle"),teleport:[String,Object],wordBreak:String,className:w,iconPrefix:String,transition:y("van-fade"),loadingType:String,forbidClick:Boolean,overlayClass:w,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean};var R=B({name:G,props:Q,emits:["update:show"],setup(e,{emit:n,slots:t}){let i,o=!1;const r=()=>{const s=e.show&&e.forbidClick;o!==s&&(o=s,F(o))},u=s=>n("update:show",s),g=()=>{e.closeOnClick&&u(!1)},f=()=>clearTimeout(i),m=()=>{const{icon:s,type:a,iconSize:C,iconPrefix:x,loadingType:P}=e;if(s||a==="success"||a==="fail")return l(A,{name:s||a,size:C,class:c("icon"),classPrefix:x},null);if(a==="loading")return l(_,{class:c("loading"),size:C,type:P},null)},S=()=>{const{type:s,message:a}=e;if(t.message)return l("div",{class:c("text")},[t.message()]);if(D(a)&&a!=="")return s==="html"?l("div",{key:0,class:c("text"),innerHTML:String(a)},null):l("div",{class:c("text")},[a])};return v(()=>[e.show,e.forbidClick],r),v(()=>[e.show,e.type,e.message,e.duration],()=>{f(),e.show&&e.duration>0&&(i=setTimeout(()=>{u(!1)},e.duration))}),I(r),T(r),()=>l(J,O({class:[c([e.position,e.wordBreak==="normal"?"break-normal":e.wordBreak,{[e.type]:!e.icon}]),e.className],lockScroll:!1,onClick:g,onClosed:f,"onUpdate:show":u},q(e,K)),{default:()=>[m(),S()]})}});function W(){const e=N({show:!1}),n=o=>{e.show=o},t=o=>{k(e,o,{transitionAppear:!0}),n(!0)},i=()=>n(!1);return V({open:t,close:i,toggle:n}),{open:t,close:i,state:e,toggle:n}}function X(e){const n=M(e),t=document.createElement("div");return document.body.appendChild(t),{instance:n.mount(t),unmount(){n.unmount(),document.body.removeChild(t)}}}const Y={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1};let p=[],Z=!1,b=k({},Y);const $=new Map;function ee(e){return H(e)?e:{message:e}}function te(){const{instance:e,unmount:n}=X({setup(){const t=z(""),{open:i,state:o,close:r,toggle:u}=W(),g=()=>{},f=()=>l(R,O(o,{onClosed:g,"onUpdate:show":u}),null);return v(t,m=>{o.message=m}),L().render=f,{open:i,close:r,message:t}}});return e}function ne(){if(!p.length||Z){const e=te();p.push(e)}return p[p.length-1]}function re(e={}){if(!E)return{};const n=ne(),t=ee(e);return n.open(k({},b,$.get(t.type||b.type),t)),n}export{re as a,R as s};

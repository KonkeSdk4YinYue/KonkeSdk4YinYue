import{_ as v,c as n,b as a,w as h,o,F as g,r as w,e as y,f as U,p as k,g as b,a as m,d as C}from"./_plugin-vue_export-helper-051f66a3.js";import"./index-9d551784.js";/* empty css              */import{B as S}from"./index-d0549590.js";import{C as B}from"./index-d8032618.js";import{C as A}from"./index-0f3161d3.js";import{F}from"./index-c3a7f1d1.js";import{_ as H}from"./nav-bar-a1dce73c.js";import{h as V,a as x,b as N}from"./api-c3130a22.js";import"./use-route-666d481f.js";import"./index-1c77c952.js";import"./use-id-ae36fcd7.js";import"./use-expose-1ff20361.js";const D={name:"KonkeSdk4YinYueSrcApp",data(){return{homeId:"",homeInfo:{},homeUsers:[],isAdmin:!1}},mounted(){this.homeId=new URLSearchParams(window.location.search).get("homeId")||"",this.getHomeInfo(),this.getHomeUsers()},methods:{toUser(e){window.__jsb.push({route:"home-manage-user",params:{homeId:this.homeId,userId:e.sUser.userId}})},changeHome(e){this.currentHome=e,window.__homeId=e.homeId,window.__jsb.setUserDefaults({key:"homeId",value:e.homeId}),localStorage.setItem("homeId",e.homeId)},async getHomeInfo(){try{const{data:e}=await V(this.homeId);this.homeInfo=e.home||{},this.isAdmin=this.homeInfo.roleType==="Admin",console.log(this.homeInfo)}catch(e){console.log(e)}},async getHomeUsers(){try{const{data:e}=await x(this.homeId);this.homeUsers=e.homeUserList||[]}catch(e){console.log(e)}},async onSave(){try{await N(this.homeInfo)}catch(e){console.log(e)}},toInvite(){window.__jsb.push({route:"home-manage-invite",params:{homeId:this.homeId}})}}},i=e=>(k("data-v-18c93d8b"),e=e(),b(),e),j={class:"home-manage"},L=i(()=>m("div",{class:"home-name-title"},"家庭名称",-1)),T={key:0,class:"users-list"},Y=i(()=>m("div",{class:"home-users-title"},"家庭成员",-1)),E={key:1,class:"users-list"},G=i(()=>m("div",{class:"plain-button"},"移交权限",-1));function K(e,c,R,q,t,r){const d=H,_=F,p=A,u=B,I=S;return o(),n("div",j,[a(d,{title:"家庭管理"}),L,a(_,{modelValue:t.homeInfo.homeName,"onUpdate:modelValue":c[0]||(c[0]=s=>t.homeInfo.homeName=s),placeholder:"请输入",onBlur:r.onSave},null,8,["modelValue","onBlur"]),t.homeUsers.length>0?(o(),n("div",T,[a(u,null,{default:h(()=>[Y,(o(!0),n(g,null,w(t.homeUsers,(s,f)=>{var l;return o(),y(p,{key:f,title:(l=s.sUser)==null?void 0:l.nickname,"is-link":"",onClick:z=>r.toUser(s)},null,8,["title","onClick"])}),128))]),_:1})])):(o(),n("div",E)),a(I,{type:"primary",color:"#FD7D28FF",class:"primary-button",onClick:r.toInvite},{default:h(()=>[U("邀请家人")]),_:1},8,["onClick"]),G])}const P=v(D,[["render",K],["__scopeId","data-v-18c93d8b"]]);C(P).mount("#root");

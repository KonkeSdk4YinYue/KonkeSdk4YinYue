import{_ as v,c as s,a as n,w as h,o,F as g,r as w,b as y,d as k,p as U,e as b,f as r,g as B}from"./_plugin-vue_export-helper-4adca727.js";import"./index-f4bb52ea.js";/* empty css              */import{B as S}from"./index-570c99a3.js";import{C as A}from"./index-12218a2e.js";import{C}from"./index-f891a278.js";import{F}from"./index-62ed2467.js";import{_ as H}from"./nav-bar-94bf83b0.js";import{h as V,a as x,b as D}from"./api-61c15ffa.js";import"./use-route-710f3c49.js";import"./index-08ecd083.js";import"./use-id-f8db432d.js";import"./use-expose-f66499b2.js";const N={name:"KonkeSdk4YinYueSrcApp",data(){return{homeId:"",homeInfo:{},homeUsers:[],isAdmin:!1}},mounted(){this.homeId=new URLSearchParams(window.location.search).get("homeId")||"",this.getHomeInfo(),this.getHomeUsers(),window.__eventBus.on("viewDidAppear",()=>{this.getHomes()})},methods:{changeHome(e){this.currentHome=e,window.__homeId=e.homeId,window.__jsb.setUserDefaults({key:"homeId",value:e.homeId}),localStorage.setItem("homeId",e.homeId)},async getHomeInfo(){try{const{data:e}=await V(this.homeId);this.homeInfo=e.home||{},this.isAdmin=this.homeInfo.roleType==="Admin",console.log(this.homeInfo)}catch(e){console.log(e)}},async getHomeUsers(){try{const{data:e}=await x(this.homeId);this.homeUsers=e.homeUserList||[]}catch(e){console.log(e)}},async onSave(){try{await D(this.homeInfo)}catch(e){console.log(e)}},toInvite(){window.__jsb.push({route:"home-manage-invite",params:{homeId:this.homeId}})}}},m=e=>(U("data-v-a608fb94"),e=e(),b(),e),L={class:"home-manage"},j=m(()=>r("div",{class:"home-name-title"},"家庭名称",-1)),T={key:0,class:"users-list"},Y=m(()=>r("div",{class:"home-users-title"},"家庭成员",-1)),E={key:1,class:"users-list"},G=m(()=>r("div",{class:"plain-button"},"移交权限",-1));function K(e,i,R,q,t,c){const d=H,_=F,p=C,u=A,f=S;return o(),s("div",L,[n(d,{title:"家庭管理"}),j,n(_,{modelValue:t.homeInfo.homeName,"onUpdate:modelValue":i[0]||(i[0]=a=>t.homeInfo.homeName=a),placeholder:"请输入",onBlur:c.onSave},null,8,["modelValue","onBlur"]),t.homeUsers.length>0?(o(),s("div",T,[n(u,null,{default:h(()=>[Y,(o(!0),s(g,null,w(t.homeUsers,(a,I)=>{var l;return o(),y(p,{key:I,title:(l=a.sUser)==null?void 0:l.nickname,"is-link":""},null,8,["title"])}),128))]),_:1})])):(o(),s("div",E)),n(f,{type:"primary",color:"#FD7D28FF",class:"primary-button",onClick:c.toInvite},{default:h(()=>[k("邀请家人")]),_:1},8,["onClick"]),G])}const P=v(N,[["render",K],["__scopeId","data-v-a608fb94"]]);B(P).mount("#root");

import{_ as g,c as v,a as s,d as i,b as a,t as y,o as x,f as P,i as w}from"./_plugin-vue_export-helper-ae94e834.js";/* empty css              */import{L as A}from"./index-5198b2b7.js";import{_ as m,P as L,a as V}from"./img-upload-096958ec.js";import{F as I}from"./index-f273d662.js";import{_ as B}from"./navbar-dd7c7647.js";import{B as C}from"./index-46966e79.js";import{_ as U}from"./safe-area-top-6391331c.js";import{A as k}from"./api-3777ac7b.js";import{a as N}from"./function-call-d8608672.js";import{O as j}from"./index-6f826b23.js";import"./index-9cad779b.js";/* empty css              */import"./index-015663ed.js";import"./use-touch-b8f7fc8d.js";import"./use-expose-833097fe.js";import"./on-popup-reopen-34d1e964.js";import"./index-ccf833f0.js";import"./index-c49f2c8f.js";import"./interceptor-c174082f.js";import"./constant-eb256a74.js";import"./index-52885be2.js";import"./use-route-fa444ad9.js";import"./use-id-b8b960f0.js";const D={name:"VenusApp",components:{ImgUpload:m},data(){return{PubAddIcon:L,PubDeleteIcon:V,isPublishing:!1,show:!1,text:"",fileList:[]}},async mounted(){},methods:{handleUpload(t){this.fileList=t},async submitPublish(){this.isPublishing=!0;try{const{success:t,errMsg:e}=await k.publishDynamic({text:this.text,pic:this.fileList.map(l=>l.url).join(",")});if(!t)throw{errMsg:e};__jsb.forwardEvent({eventName:"dynamic-publish-new",fromPage:"dynamic-publish",toPage:"dynamic"}),__jsb.pop()}catch(t){N(t.errMsg||"发布失败"),console.log(t)}finally{this.isPublishing=!1}}}},E={class:"dynamic-publish"},F={class:"publish-content"},M={class:"word-limit"},O={class:"loading-container"};function T(t,e,l,q,o,r){var p;const _=U,c=C,d=B,u=I,h=m,f=A,b=j;return x(),v("div",E,[s(_),s(d,{title:"发布动态"},{default:i(()=>{var n;return[s(c,{round:"",class:"publish-btn",loading:o.isPublishing,disabled:!o.text&&(!o.fileList||!((n=o.fileList)!=null&&n.length)),onClick:r.submitPublish},{default:i(()=>[P(" 发布 ")]),_:1},8,["loading","disabled","onClick"])]}),_:1}),a("div",F,[s(u,{modelValue:o.text,"onUpdate:modelValue":e[0]||(e[0]=n=>o.text=n),rows:"8",type:"textarea",maxlength:"250",placeholder:"记录你的生活点滴吧~"},null,8,["modelValue"]),a("div",M,y((p=o.text)==null?void 0:p.length)+"/250",1),s(h,{onChange:r.handleUpload},null,8,["onChange"])]),s(b,{show:o.isPublishing},{default:i(()=>[a("div",O,[s(f)])]),_:1},8,["show"])])}const S=g(D,[["render",T],["__scopeId","data-v-03df1b00"]]);w(S).mount("#root");

import{_ as x,c,a as n,b as s,d as r,n as d,t as D,f as p,o as l,e as _,j as P,p as V,h as B,i as N}from"./_plugin-vue_export-helper-ae94e834.js";/* empty css              */import{L as G}from"./index-5198b2b7.js";/* empty css              */import"./index-229bfbdd.js";import"./index-015663ed.js";import{D as S}from"./index-55f6bf99.js";import{B as F}from"./index-46966e79.js";import{F as A}from"./index-f273d662.js";import{_ as f}from"./img-upload-096958ec.js";import{I as L}from"./index-9cad779b.js";import{_ as H}from"./navbar-dd7c7647.js";import{_ as M}from"./safe-area-top-6391331c.js";import{A as R}from"./api-3777ac7b.js";import{a as h}from"./function-call-d8608672.js";import{P as j}from"./index-c49f2c8f.js";import{O as z}from"./index-6f826b23.js";import"./use-id-b8b960f0.js";import"./use-expose-833097fe.js";import"./use-route-fa444ad9.js";import"./use-tab-status-ea9b54fd.js";import"./on-popup-reopen-34d1e964.js";import"./constant-eb256a74.js";import"./interceptor-c174082f.js";import"./use-touch-b8f7fc8d.js";import"./index-ccf833f0.js";import"./index-52885be2.js";const O=""+new URL("female_icon-626cd6fd.svg",import.meta.url).href,T=""+new URL("female_icon_h-4ea70ed6.svg",import.meta.url).href,E=""+new URL("male_icon-03146f1b.svg",import.meta.url).href,q=""+new URL("male_icon_h-a83e4106.svg",import.meta.url).href;const J=(t,o)=>(t==="year"&&(o.text+="年"),t==="month"&&(o.text+="月"),t==="day"&&(o.text+="日"),o),K={name:"SetInfo",components:{ImgUpload:f},data(){return{FemaleIconH:T,FemaleIcon:O,MaleIconH:q,MaleIcon:E,mobile:"",showPop:!1,show:!1,avatarUrl:"",birthday:"",currentDate:["1990","01","01"],formatter:J,minDate:new Date(1900,0,1),maxDate:new Date(2005,12,31),nickName:"",activeGender:0,inviteCode:""}},computed:{disabled(){return!this.avatarUrl||!this.nickName||!this.birthday}},methods:{async handleSubmitBirthday(){var t;this.birthday=(t=this.currentDate)==null?void 0:t.join("-"),this.showPop=!1,this.showDate=!1},handleUpload(t){const o=t[t.length-1];this.avatarUrl=o.url},async updateProfile(){this.loading=!0;try{const t={birthday:this.birthday,gender:this.activeGender,nickName:this.nickName,headPic:this.avatarUrl,inviteCode:this.inviteCode},{success:o,message:u}=await R.updateProfile(t);o?h({message:"提交成功",onClose:()=>{__jsb.invoke({scope:"app",method:"initUserInfoFinished"})}}):h(u||"提交失败")}catch(t){h(t.message||"提交失败")}finally{this.loading=!1}}}},Q=t=>(V("data-v-884b805d"),t=t(),B(),t),W={class:"setting-container"},X={class:"container"},Y={class:"avatar-container"},Z={class:"avatar"},$={key:0},ee={key:2,class:"change"},oe=Q(()=>s("div",{class:"label"},"生日",-1)),te={class:"gender"},ne={class:"loading-container"};function ae(t,o,u,ie,e,i){const g=M,b=H,m=L,w=f,v=A,y=F,U=S,k=j,C=G,I=z;return l(),c("div",W,[n(g),n(b,{title:"个人信息",showBorder:!1}),s("div",X,[s("div",Y,[n(w,{previewImage:!1,customer:"",onChange:i.handleUpload,UploaderSize:"80px",UploaderUploadBackground:"#fff"},{default:r(()=>[s("div",Z,[e.avatarUrl?_("",!0):(l(),c("span",$,"设置头像")),e.avatarUrl?(l(),P(m,{key:1,src:e.avatarUrl,width:"96",height:"96",radius:"40",fit:"cover"},null,8,["src"])):_("",!0),e.avatarUrl?(l(),c("span",ee,"更换")):_("",!0)])]),_:1},8,["onChange"])]),n(v,{"label-width":"60px",modelValue:e.nickName,"onUpdate:modelValue":o[0]||(o[0]=a=>e.nickName=a),label:"昵称",placeholder:"请输入昵称"},null,8,["modelValue"]),s("div",{class:"field-item",onClick:o[1]||(o[1]=a=>e.showPop=!0)},[oe,s("div",{class:d(["value",{disabled:!e.birthday}])},D(e.birthday||"请选择"),3)]),s("div",te,[s("div",{class:d(["gender-item female",{active:e.activeGender===2}]),onClick:o[2]||(o[2]=a=>e.activeGender=2)},[n(m,{src:e.activeGender===2?e.FemaleIconH:e.FemaleIcon},null,8,["src"]),p(" 女 ")],2),s("div",{class:d(["gender-item male",{active:e.activeGender===1}]),onClick:o[3]||(o[3]=a=>e.activeGender=1)},[n(m,{src:e.activeGender===1?e.MaleIconH:e.MaleIcon},null,8,["src"]),p(" 男 ")],2)]),n(v,{"label-width":"60px",modelValue:e.inviteCode,"onUpdate:modelValue":o[4]||(o[4]=a=>e.inviteCode=a),label:"邀请码",placeholder:"非必填"},null,8,["modelValue"]),n(y,{type:"primary",round:"",block:"",onClick:i.updateProfile,disabled:i.disabled},{default:r(()=>[p("提交")]),_:1},8,["onClick","disabled"])]),n(k,{show:e.showPop,"onUpdate:show":o[6]||(o[6]=a=>e.showPop=a),position:"bottom",class:"birthday-popup",onClose:t.handleClosePop},{default:r(()=>[n(U,{modelValue:e.currentDate,"onUpdate:modelValue":o[5]||(o[5]=a=>e.currentDate=a),title:"选择你的生日","min-date":e.minDate,formatter:e.formatter,"max-date":e.maxDate,onConfirm:i.handleSubmitBirthday},null,8,["modelValue","min-date","formatter","max-date","onConfirm"])]),_:1},8,["show","onClose"]),n(I,{show:t.loading},{default:r(()=>[s("div",ne,[n(C)])]),_:1},8,["show"])])}const se=x(K,[["render",ae],["__scopeId","data-v-884b805d"]]);N(se).mount("#root");

import{_ as T,c as n,b as a,w as A,F as u,r as g,j as _,o as t,a as l,t as m,k as y,p as C,d as x,e as w}from"./_plugin-vue_export-helper-441d49bc.js";import{_ as E}from"./no-data-f9c21656.js";import{I as N}from"./index-3c7dc3c1.js";import{T as S,a as z}from"./index-52a57577.js";import{_ as B}from"./nav-bar-d5f559a7.js";import{y as L,z as V,A as Y,f as j}from"./api-69fa8fe6.js";import{g as k}from"./dev-image-f6fc399c.js";import"./index-3c7cc260.js";import"./use-id-bbee3c24.js";import"./use-touch-a55357c8.js";import"./use-route-ace38816.js";const K={name:"KonkeSdk4YinYueSrcApp",data(){return{isEditing:!1,tabIndex:0,frequentDevices:[],allDevices:[],frequentDevIds:[]}},mounted(){this.reloadAll()},methods:{async addToFrequent(e){try{await L({frequentType:"Device",userDeviceId:e.userDeviceId}),this.reloadAll()}catch(c){console.log(c)}},async removeFromFrequent(e){try{await V({frequentId:e.frequentId}),this.reloadAll()}catch(c){console.log(c)}},async reloadAll(){await Promise.all([this.getFrequentDevices(),this.getAllDevices()]),this.calculateDevices()},async getFrequentDevices(){try{const{data:e}=await Y(),{frequentList:c}=e;this.frequentDevices=c.filter(o=>o.frequentType=="Device").map(o=>{var r,s;return{...o.userDevice,frequentId:o.frequentId,icon:k((s=(r=o.userDevice)==null?void 0:r.device)==null?void 0:s.cateType)}})||[],this.frequentDevIds=this.frequentDevices.map(o=>o.userDeviceId)||[]}catch(e){this.frequentDevices=[],this.frequentDevIds=[],console.log(e)}},async getAllDevices(){try{const{data:e}=await j(),{userDeviceList:c}=e;c.forEach(o=>{var r;o.icon=k((r=o.device)==null?void 0:r.cateType)}),this.allDevices=c.filter(o=>!this.frequentDevIds.includes(o.userDeviceId))||[]}catch(e){this.allDevices=[],console.log(e)}},async calculateDevices(){console.log(this.frequentDevices,this.allDevices,"calculateDevices")},onClickTab(e){console.log(e)}}},q=e=>(C("data-v-d781ea99"),e=e(),x(),e),P={class:"home"},R={key:0,class:"devices-grid"},U=["src"],G=q(()=>l("div",{class:"spacer"},null,-1)),H={class:"device-name"},J={class:"room-name"},M={key:2,class:"dev-top-right-icon"},O={key:0,class:"devices-grid"},Q=["src"],W=q(()=>l("div",{class:"spacer"},null,-1)),X={class:"device-name"},Z={class:"room-name"},$={key:2,class:"dev-top-right-icon"};function ee(e,c,o,r,s,p){const I=B,D=z,F=S,v=N,f=E;return t(),n("div",P,[a(I,{title:"常用设备","right-text":s.isEditing?"完成":"编辑",onClickRight:c[0]||(c[0]=i=>s.isEditing=!s.isEditing),border:!1},null,8,["right-text"]),a(F,{active:s.tabIndex,"onUpdate:active":c[1]||(c[1]=i=>s.tabIndex=i),shrink:"",onClickTab:p.onClickTab},{default:A(()=>[a(D,{title:"常用设备"}),a(D,{title:"非常用设备"})]),_:1},8,["active","onClickTab"]),s.tabIndex==0?(t(),n(u,{key:0},[s.frequentDevices.length>0?(t(),n("div",R,[(t(!0),n(u,null,g(s.frequentDevices,(i,h)=>{var d;return t(),n("div",{key:h,class:"device-item"},[((d=i.icon)==null?void 0:d.length)>0?(t(),n("img",{key:0,src:i.icon,class:"device-icon"},null,8,U)):(t(),_(v,{key:1,name:"question-o",size:"40",color:"#ccc"})),G,l("div",H,m(i.deviceName),1),l("div",J,m(i.roomName),1),s.isEditing?(t(),n("div",M,[a(v,{name:"clear",size:"22",color:"#FD7D28FF",onClick:b=>p.removeFromFrequent(i)},null,8,["onClick"])])):y("",!0)])}),128))])):(t(),_(f,{key:1}))],64)):(t(),n(u,{key:1},[s.allDevices.length>0?(t(),n("div",O,[(t(!0),n(u,null,g(s.allDevices,(i,h)=>{var d;return t(),n("div",{key:h,class:"device-item"},[((d=i.icon)==null?void 0:d.length)>0?(t(),n("img",{key:0,src:i.icon,class:"device-icon"},null,8,Q)):(t(),_(v,{key:1,name:"question-o",size:"40",color:"#ccc"})),W,l("div",X,m(i.deviceName),1),l("div",Z,m(i.roomName),1),s.isEditing?(t(),n("div",$,[a(v,{name:"add",size:"22",color:"#FD7D28FF",onClick:b=>p.addToFrequent(i)},null,8,["onClick"])])):y("",!0)])}),128))])):(t(),_(f,{key:1}))],64))])}const te=T(K,[["render",ee],["__scopeId","data-v-d781ea99"]]);w(te).mount("#root");

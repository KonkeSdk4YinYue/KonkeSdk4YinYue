import{_ as C,c,b as a,w as m,o as t,F as w,r as f,e as l,u as d,f as H,d as y}from"./_plugin-vue_export-helper-051f66a3.js";import{I as D}from"./index-9d551784.js";/* empty css              */import{B as L}from"./index-d0549590.js";import{C as b}from"./index-d8032618.js";import{C as U}from"./index-0f3161d3.js";import{_ as A}from"./nav-bar-a1dce73c.js";import{l as x,x as F}from"./api-c3130a22.js";import{a as N}from"./function-call-753dd7bf.js";import"./use-route-666d481f.js";import"./index-1c77c952.js";import"./use-expose-1ff20361.js";import"./index-1c58f097.js";import"./use-touch-8855ff1b.js";const B={name:"KonkeSdk4YinYueSrcApp",data(){return{homeUserList:[],homeList:[],currentHome:{}}},mounted(){this.getHomes(),window.__eventBus.on("viewDidAppear",()=>{this.getHomes()})},methods:{async onAccept(e){try{await x({HUID:e.HUID,status:2})}catch(s){N(s.info)}},toDetail(){window.__jsb.push({route:"home-manage-detail",params:{homeId:this.currentHome.homeId}})},changeHome(e){this.currentHome=e,window.__homeId=e.homeId,window.__jsb.setUserDefaults({key:"homeId",value:e.homeId}),localStorage.setItem("homeId",e.homeId)},async getHomes(){try{const{data:e}=await F();this.homeList=(e==null?void 0:e.homeList)||[],this.homeUserList=(e==null?void 0:e.homeUserList)||[];const s=[...this.homeList,...this.homeUserList.map(i=>i.home)];if(s.length>0){const i=s.map(n=>n.homeId+""),h=localStorage.getItem("homeId")||"";i.includes(h)?window.__homeId=h:(window.__homeId=s[0].homeId,localStorage.setItem("homeId",s[0].homeId)),this.currentHome=s.find(n=>n.homeId==window.__homeId)}else this.currentHome={}}catch(e){console.log(e)}},onAddNew(){window.__jsb.push({route:"home-create"})}}},S={class:"home-manage"},j=["onClick"],V={key:1,class:"accepted"};function z(e,s,i,h,n,r){const k=A,u=D,p=U,I=b,v=L;return t(),c("div",S,[a(k,{title:"家庭管理","right-text":"新建",onClickRight:r.onAddNew},null,8,["onClickRight"]),a(I,{inset:"",title:"分享的家庭"},{default:m(()=>[(t(!0),c(w,null,f(n.homeUserList,(o,_)=>(t(),l(p,{key:_,title:o.home.homeName,size:"large",onClick:g=>r.changeHome(o.home)},{label:m(()=>[o.status==1?(t(),c("div",{key:0,class:"accept-button",onClick:g=>r.onAccept(o)},"接受",8,j)):o.status==2?(t(),c("div",V,"已接受")):d("",!0)]),"right-icon":m(()=>[n.currentHome.homeId==o.home.homeId?(t(),l(u,{key:0,name:"success",color:"#FD7D28"})):d("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1}),a(I,{inset:"",title:"我的家庭"},{default:m(()=>[(t(!0),c(w,null,f(n.homeList,(o,_)=>(t(),l(p,{key:_,title:o.homeName,size:"large",onClick:g=>r.changeHome(o)},{"right-icon":m(()=>[n.currentHome.homeId==o.homeId?(t(),l(u,{key:0,name:"success",color:"#FD7D28"})):d("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1}),a(v,{type:"primary",color:"#FD7D28FF",class:"manage-button",onClick:r.toDetail},{default:m(()=>[H("家庭管理")]),_:1},8,["onClick"])])}const R=C(B,[["render",z],["__scopeId","data-v-771dfbd3"]]);y(R).mount("#root");

import{_ as C,c,a,w as m,o as t,F as w,r as f,b as h,u as d,d as H,g as y}from"./_plugin-vue_export-helper-4adca727.js";import{I as D}from"./index-f4bb52ea.js";/* empty css              */import{B as L}from"./index-570c99a3.js";import{C as b}from"./index-12218a2e.js";import{C as U}from"./index-f891a278.js";import{_ as A}from"./nav-bar-188b05ac.js";import{g as F,u as N}from"./api-b5274a4f.js";import{a as x}from"./function-call-8db26e1c.js";import"./use-route-710f3c49.js";import"./index-08ecd083.js";import"./use-expose-f66499b2.js";import"./index-28bb2e26.js";import"./use-touch-330ddaa2.js";const B={name:"KonkeSdk4YinYueSrcApp",data(){return{homeUserList:[],homeList:[],currentHome:{}}},mounted(){this.getHomes(),window.__eventBus.on("viewDidAppear",()=>{this.getHomes()})},methods:{async onAccept(e){try{await F({HUID:e.HUID,status:2})}catch(s){x(s.info)}},toDetail(){window.__jsb.push({route:"home-manage-detail",params:{homeId:this.currentHome.homeId}})},changeHome(e){this.currentHome=e,window.__homeId=e.homeId,window.__jsb.setUserDefaults({key:"homeId",value:e.homeId}),localStorage.setItem("homeId",e.homeId)},async getHomes(){try{const{data:e}=await N();this.homeList=(e==null?void 0:e.homeList)||[],this.homeUserList=(e==null?void 0:e.homeUserList)||[];const s=[...this.homeList,...this.homeUserList.map(i=>i.home)];if(s.length>0){const i=s.map(n=>n.homeId+""),l=localStorage.getItem("homeId")||"";i.includes(l)?window.__homeId=l:(window.__homeId=s[0].homeId,localStorage.setItem("homeId",s[0].homeId)),this.currentHome=s.find(n=>n.homeId==window.__homeId)}else this.currentHome={}}catch(e){console.log(e)}},onAddNew(){window.__jsb.push({route:"home-create"})}}},S={class:"home-manage"},j=["onClick"],V={key:1,class:"accepted"};function z(e,s,i,l,n,r){const k=A,u=D,p=U,I=b,v=L;return t(),c("div",S,[a(k,{title:"家庭管理","right-text":"新建",onClickRight:r.onAddNew},null,8,["onClickRight"]),a(I,{inset:"",title:"分享的家庭"},{default:m(()=>[(t(!0),c(w,null,f(n.homeUserList,(o,_)=>(t(),h(p,{key:_,title:o.home.homeName,size:"large",onClick:g=>r.changeHome(o.home)},{label:m(()=>[o.status==1?(t(),c("div",{key:0,class:"accept-button",onClick:g=>r.onAccept(o)},"接受",8,j)):o.status==2?(t(),c("div",V,"已接受")):d("",!0)]),"right-icon":m(()=>[n.currentHome.homeId==o.home.homeId?(t(),h(u,{key:0,name:"success",color:"#FD7D28"})):d("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1}),a(I,{inset:"",title:"我的家庭"},{default:m(()=>[(t(!0),c(w,null,f(n.homeList,(o,_)=>(t(),h(p,{key:_,title:o.homeName,size:"large",onClick:g=>r.changeHome(o)},{"right-icon":m(()=>[n.currentHome.homeId==o.homeId?(t(),h(u,{key:0,name:"success",color:"#FD7D28"})):d("",!0)]),_:2},1032,["title","onClick"]))),128))]),_:1}),a(v,{type:"primary",color:"#FD7D28FF",class:"manage-button",onClick:r.toDetail},{default:m(()=>[H("家庭管理")]),_:1},8,["onClick"])])}const R=C(B,[["render",z],["__scopeId","data-v-771dfbd3"]]);y(R).mount("#root");
